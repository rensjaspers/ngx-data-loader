<ng-container *ngIf="dataLoader && dataLoader.loadingState$ | async as state">
  <ng-container [ngSwitch]="state | loadingStateTemplate : showStaleData">
    <ngx-data-loader-error
      *ngSwitchCase="'error'"
      [error]="state.error"
      [errorTemplate]="errorTemplate"
      (reload)="reload()"
    ></ngx-data-loader-error>

    <ngx-data-loader-loaded
      *ngSwitchCase="'data'"
      [data]="state.data"
      [loading]="state.loading"
      [loadedTemplate]="loadedTemplate"
      [showStaleData]="showStaleData"
    ></ngx-data-loader-loaded>

    <ngx-data-loader-loading
      *ngSwitchCase="'loading'"
      [loadingTemplateDelay]="loadingTemplateDelay"
      [loadingTemplate]="loadingTemplate"
    ></ngx-data-loader-loading>
  </ng-container>
</ng-container>
